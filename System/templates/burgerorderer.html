<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <!-- Viewport setting for responsive design -->
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Page title that appears in the browser tab -->
    <title>BurgerOrderer</title>
    <!-- Correct placement of the link to the external CSS file -->
    <link rel="stylesheet" href="{{ url_for('static', filename='styles.css') }}">
</head>
<body>
    <!-- Main heading of the Burger Order page -->
    <h1>BurgerOrderer</h1>
    
    <!-- Section for selecting a burger -->
    <p>Select Burger</p>
    <!-- Button for selecting a regular Burger -->
    <button id="burgerButton" class="button" onclick="selectItem('Burger')">Burger</button>
    <!-- Button for selecting a CheeseBurger -->
    <button id="cheeseBurgerButton" class="button" onclick="selectItem('CheeseBurger')">CheeseBurger</button>
    <!-- Button for selecting a DoubleBurger -->
    <button id="doubleBurgerButton" class="button" onclick="selectItem('DoubleBurger')">DoubleBurger</button>

    <!-- Input field to enter special requests (comments) -->
    <input type="text" id="message" placeholder="Special requests?">

    <!-- Section for choosing between Pickup and Delivery using radio buttons -->
    <input type="radio" id="pickup" name="orderType" value="Pickup">
    <label for="pickup">Pickup</label>
    <input type="radio" id="delivery" name="orderType" value="Delivery">
    <label for="delivery">Delivery</label>

    <!-- Button to finalize the order and send the data (burger + side + comment) -->
    <button class="red_button" onclick="finishOrder()">Finish Order</button>

    <!-- Paragraph element to display the selected burger and side -->
    <p id="selectedItem">No item selected</p>

    <!-- Section for selecting sides -->
    <p>Select Sides</p>
    <button id="friesButton" class="button" onclick="selectSide('Fries')">Fries</button>
    <button id="largeFriesButton" class="button" onclick="selectSide('Large Fries')">Large Fries</button>
    <button id="cheesyFriesButton" class="button" onclick="selectSide('Cheesy Fries')">Cheesy Fries</button>

    <script>
        let selectedItem = "";  // Variable to store the selected burger
        let selectedSide = "";  // Variable to store the selected side

        // Function to select a burger
        function selectItem(item) {
            selectedItem = item;  // Assign the selected burger to the variable
            // Update the paragraph element to display the selected burger
            document.getElementById('selectedItem').innerText = 'Selected item: ' + item;
        }

        // Function to select a side (Fries, Large Fries, or Cheesy Fries)
        function selectSide(side) {
            selectedSide = side;  // Assign the selected side to the variable
            // Append the selected side to the displayed text
            document.getElementById('selectedItem').innerText += ' with side: ' + side;
        }

        // Function to finalize the order and send data to the server
        function finishOrder() {
            // Ensure that a burger is selected before finalizing the order
            if (!selectedItem) {
                alert('Please select a burger first!');  // Display an alert if no burger is selected
                return;  // Stop the function if no burger is selected
            }

            // Retrieve the comment from the input field (if any)
            const comment = document.getElementById('message').value;
            // Check whether Pickup or Delivery is selected using radio buttons
            const pickup = document.querySelector('input[name="orderType"]:checked')?.value === 'Pickup' ? 'Pickup' : '';
            const delivery = document.querySelector('input[name="orderType"]:checked')?.value === 'Delivery' ? 'Delivery' : '';

            // Ensure that either Pickup or Delivery is selected
            if (!pickup && !delivery) {
                alert('Please select either Pickup or Delivery!');  // Display an alert if neither option is selected
                return;  // Stop the function if no order type is selected
            }

            // Send the selected burger, side, comment, and order type (pickup/delivery) to the server
            fetch('/send-data', {
                method: 'POST',  // Use POST method to send data
                headers: { 'Content-Type': 'application/json' },  // Send data as JSON
                body: JSON.stringify({
                    item: selectedItem,  // Selected burger
                    side: selectedSide,  // Selected side
                    comment: comment,  // Special requests (if any)
                    pickup: pickup,  // Pickup or Delivery option
                    delivery: delivery  // Pickup or Delivery option
                })  // Data being sent to the server
            })
            .then(response => response.json())  // Parse the response as JSON
            .then(() => {
                // Display a confirmation alert with the selected burger, side, and order type
                alert('Order finished: ' + selectedItem + 
                    (selectedSide ? ' with ' + selectedSide : '') + 
                    ' sent with comment: ' + comment + 
                    (pickup ? ' and marked for pickup.' : '') + 
                    (delivery ? ' and marked for delivery.' : ''));
            });
        }
    </script>
</body>
</html>
